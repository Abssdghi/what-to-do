<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Swipe Cards Pro</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-zinc-100 h-screen flex items-center justify-center overflow-hidden p-8">

<div id="card-container" class="relative w-80 h-[520px]">  
</div>

<script>
const container = document.getElementById("card-container");
const STORAGE_KEY = "seen_cards_history";

// ---------- Random Data ----------
function getRandomCard() {
  const id = Date.now() + Math.random();

  return {
    id,
    image: `https://picsum.photos/400/700?random=${Math.floor(Math.random()*1000)}`,
    title: ["Explorer","Dreamer","Innovator","Visionary"][Math.floor(Math.random()*4)],
    description: [
      "Minimal vibes onlyonlyonlyonlyonl yonlyonlyonly onlyonlyonlyonlyonlyonly onlyonlyonlyonlyonlyonlyon lyonlyonlyonlyonlyo nlyonlyonlyonl yonlyonly.",
      "Living in aesthetic mode.",
      "Coffee + Code.",
      "Chasing experiences."
    ][Math.floor(Math.random()*4)]
  };
}

// ---------- Save History ----------
function saveToHistory(data) {
  const old = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
  old.push(data);
  localStorage.setItem(STORAGE_KEY, JSON.stringify(old));
}

// ---------- Create Card ----------
function createCard() {
  const data = getRandomCard();

  const card = document.createElement("div");
  card.className = `
    absolute w-full h-full rounded-[50px] overflow-hidden
    shadow-2xl cursor-grab active:cursor-grabbing
    transition-transform
  `;

  card.innerHTML = `
    <div class="w-full h-full relative">
      <img src="${data.image}" class="w-full h-full object-cover"/>
      <div class="absolute bottom-0 w-full p-6 text-white bg-gradient-to-t from-black/80 to-transparent">
        <h2 class="text-2xl font-bold text-shadow">${data.title}</h2>
        <p class="text-sm opacity-80 mt-1 text-shadow">${data.description}</p>
      </div>
    </div>
  `;

  addDrag(card, data);
  container.appendChild(card);
}

// ---------- Drag + Touch ----------
function addDrag(card, data) {
  let startX, startY, currentX=0, currentY=0;
  let dragging = false;

  const start = (x,y) => {
    dragging = true;
    startX = x;
    startY = y;
    card.style.transition = "none";
  };

  const move = (x,y) => {
    if(!dragging) return;
    currentX = x - startX;
    currentY = y - startY;

    card.style.transform = `
      translate(${currentX}px, ${currentY}px)
      rotate(${currentX * 0.05}deg)
    `;
  };

  const end = () => {
    if(!dragging) return;
    dragging = false;

    const threshold = 120;

    if(Math.abs(currentX) > threshold || Math.abs(currentY) > threshold) {
      saveToHistory(data);

      const dirX = currentX > 0 ? 1200 : -1200;
      const dirY = currentY > 0 ? 1200 : -1200;

      card.style.transition = "0.4s ease-out";
      card.style.transform = `translate(${dirX}px, ${dirY}px) rotate(${currentX*0.1}deg)`;

      setTimeout(()=>{
        card.remove();
        // createCard();
        // createCard();
      },400);
    } else {
      card.style.transition = "0.3s ease";
      card.style.transform = "translate(0,0) rotate(0)";
    }
  };

  // Mouse
  card.addEventListener("mousedown", e => start(e.clientX, e.clientY));
  document.addEventListener("mousemove", e => move(e.clientX, e.clientY));
  document.addEventListener("mouseup", end);

  // Touch
  card.addEventListener("touchstart", e => {
    const t = e.touches[0];
    start(t.clientX, t.clientY);
  });

  document.addEventListener("touchmove", e => {
    const t = e.touches[0];
    move(t.clientX, t.clientY);
  });

  document.addEventListener("touchend", end);
}

// ---------- Init ----------
createCard();
createCard();
</script>

</body>
</html>